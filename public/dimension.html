<!DOCTYPE html>
<html>
	<head>
		<title>Title of the document</title>
		<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
	</head>

	<body>
		<canvas id="myCanvas" width="310" height="459"></canvas>
		
		<script>
			var leftX = 0;
			var rightX = 309;
			var botY = 458;
			var topY = 0;
			var dataURL = 'images.jpg';
			var image;
			var shrinkX = false, expandX = false, shrinkY = false, expandY = false;  
			
			var canvas = document.getElementById('myCanvas');
			var context = canvas.getContext('2d');

			// load image from data url
			var imageObj = new Image();
			imageObj.onload = function() {
				image = this;
				setHandlers();
				updateBorders();
			};

			imageObj.src = dataURL;

			
			
			
			function updateBorders() {
				context.drawImage(image, 0, 0);
				
				context.fillStyle="red";
				context.fillRect(leftX,topY,1,botY-topY);
				context.fillRect(rightX,topY,1,botY-topY);
				context.fillRect(leftX,topY,rightX-leftX,1);
				context.fillRect(leftX,botY,rightX-leftX,1);
				
				context.fillStyle="blue";
				context.rect(0,400,77,58); context.stroke();
				context.rect(77,400,77,58); context.stroke();
				context.rect(154,400,77,58); context.stroke();
				context.rect(231,400,77,58); context.stroke();
				
				context.fillStyle="black";
				context.font = "15px Arial";
				
				context.fillText("Expand X",5,430);
				context.fillText("Shrink X",82,430);
				context.fillText("Expand Y",159,430);
				context.fillText("Shrink Y",236,430);
				
				context.fillText((rightX-leftX) + "cm width",10,20);
				context.fillText((botY-topY) + "cm height",10,40);
			}
			
			

			function setHandlers() {
				$('#myCanvas').mousedown(function(event) {
					var x = event.offsetX, y = event.offsetY;
					if (y > 400) {
						if (x < 77) {
							expandX = true;
						} else if (x < 154) {
							shrinkX = true;
						} else if (x < 231) {
							expandY = true;
						} else {
							shrinkY = true;
						}
					}
					//console.log("mousedown");
				}).bind('mouseup', function() {
					expandX = false;
					shrinkX = false;
					shrinkY = false;
					expandY = false;
					//console.log("mouse up");
				}).bind('mouseleave', function() {
					var x = event.offsetX, y = event.offsetY;
					if (y > 400) {
						if (x < 77) {
							shrinkX = false;
							expandY = false;
							shrinkY = false;
						} else if (x < 154) {
							expandX = false;
							expandY = false;
							shrinkY = false;
						} else if (x < 231) {
							expandX = false;
							shrinkX = false;
							shrinkY = false;
						} else {
							shrinkX = false;
							expandY = false;
							shrinkY = false;
						}
					}
					//console.log("mouse leave");
				});
				
				setInterval(function() {
					var pressed = false;
					if (expandX) {
						leftX = Math.max(0, leftX-1);
						rightX = Math.min(309, rightX+1);
						pressed = true;
					}
					if (shrinkX) {
						leftX = Math.min(154, leftX+1);
						rightX = Math.max(154, rightX-1);
						pressed = true;
					}
					if (shrinkY) {
						topY = Math.min(229, topY+1);
						botY = Math.max(229, botY-1);
						pressed = true;
					}
					if (expandY) {
						topY = Math.max(0, topY-1);
						botY = Math.min(458, botY+1);
						pressed = true;
					}
					if (pressed) updateBorders();
				}, 50);
			}
		</script>
	</body>

</html> 